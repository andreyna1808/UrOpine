{"ast":null,"code":"import _slicedToArray from\"/home/andreyna/moreira-Andreyna-Carvalho/modulo3/lab-eddit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{IMG_url,Post_url}from'../../../constants/urls';import{Body,ButtonRemove,ContainerCard,ContainerInfo,ContainerProfile,ImgCards,ImgCardsComent,ImgPost,ImgProfile,Loading,ParagrafoText}from'../styledPost';import Gif from'../../../constants/imgs/loading.gif';import darLike from'../../../constants/imgs/darLike.png';import Like from'../../../constants/imgs/like.png';import desLike from'../../../constants/imgs/deslike.png';import darDesLike from'../../../constants/imgs/darDeslike.png';import Comentar from'../../../constants/imgs/comentarios.png';import Compatilhar from'../../../constants/imgs/compartilhar.png';import ToastAnimated,{showToast}from'../../ui-lib';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ViewPost(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),infoPost=_useState2[0],setInfoPost=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var getPosts=function getPosts(){axios.get(Post_url,{headers:{Authorization:localStorage.getItem('tokenEddit')}}).then(function(res){setInfoPost(res.data);postVoteLike();postVoteDeslike();deletVote();}).catch(function(err){console.log(err.response);});};var getPhotos=function getPhotos(){axios.get(IMG_url).then(function(res){setInfo(res.data.hits);}).catch(function(err){console.log(err.response);});};var idComments=function idComments(id){localStorage.setItem('idComments',id);navigate('/comments-post');};var postVoteLike=function postVoteLike(idVote){var body={direction:1};axios.post(\"\".concat(Post_url,\"/\").concat(idVote,\"/votes\"),body,{headers:{Authorization:localStorage.getItem('tokenEddit')}}).then(function(res){showToast({type:\"success\",message:\"Você adicionou + 1 like ao post\"});}).catch(function(err){console.log(err.response);});};var postVoteDeslike=function postVoteDeslike(idVote){var body={direction:-1};axios.post(\"\".concat(Post_url,\"/\").concat(idVote,\"/votes\"),body,{headers:{Authorization:localStorage.getItem('tokenEddit')}}).then(function(res){showToast({type:\"success\",message:\"Você deu -1 like ao post\"});}).catch(function(err){});};var deletVote=function deletVote(idVote){axios.delete(\"\".concat(Post_url,\"/\").concat(idVote,\"/votes\"),{headers:{Authorization:localStorage.getItem('tokenEddit')}}).then(function(res){showToast({type:\"success\",message:\"Você deletou sua interação para adicionar novamente clique duas vezes no like ou deslike\"});}).catch(function(err){});};useEffect(function(){getPosts();getPhotos();},[getPosts()]);return/*#__PURE__*/_jsx(\"div\",{children:infoPost&&infoPost.length>0?infoPost.map(function(posts,index){return/*#__PURE__*/_jsxs(ContainerCard,{children:[/*#__PURE__*/_jsx(ToastAnimated,{}),/*#__PURE__*/_jsxs(ContainerProfile,{children:[/*#__PURE__*/_jsx(ImgProfile,{src:info[index+1].userImageURL}),/*#__PURE__*/_jsx(ParagrafoText,{children:posts.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"@\",posts.username]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ImgPost,{src:info[index].largeImageURL}),/*#__PURE__*/_jsx(Body,{children:posts.body})]}),/*#__PURE__*/_jsxs(ContainerInfo,{children:[/*#__PURE__*/_jsx(\"p\",{children:posts.voteSum&&posts.voteSum.length>=1?/*#__PURE__*/_jsxs(\"p\",{children:[\"curtidas: \",posts.voteSum]}):/*#__PURE__*/_jsx(\"p\",{children:\"curtidas: 0\"})}),/*#__PURE__*/_jsx(ImgCards,{onClick:function onClick(){return postVoteLike(posts.id);},src:posts.userVote===1?Like:darLike,alt:\"dar like\"}),/*#__PURE__*/_jsx(ImgCards,{onClick:function onClick(){return postVoteDeslike(posts.id);},src:posts.userVote===-1?desLike:darDesLike,alt:\"dar like\"}),/*#__PURE__*/_jsx(ButtonRemove,{onClick:function onClick(){return deletVote(posts.id);},children:\"Zerar meu votos\"}),/*#__PURE__*/_jsx(ImgCardsComent,{src:Compatilhar,alt:\"compartilhar\"}),/*#__PURE__*/_jsx(ImgCardsComent,{onClick:function onClick(){return idComments(posts.id);},src:Comentar,alt:\"dar like\"}),/*#__PURE__*/_jsx(\"p\",{children:posts.commentCount&&posts.commentCount.length>=1?/*#__PURE__*/_jsxs(\"p\",{children:[\"coment\\xE1rios: \",posts.commentCount]}):/*#__PURE__*/_jsx(\"p\",{children:\"coment\\xE1rio: 0\"})})]})]},posts.id);}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Aguarde, pois estamos Carregando posts...\"}),/*#__PURE__*/_jsx(Loading,{src:Gif})]})});}","map":{"version":3,"sources":["/home/andreyna/moreira-Andreyna-Carvalho/modulo3/lab-eddit/src/pages/post/viewPosts/viewPost.js"],"names":["React","useEffect","useState","useNavigate","axios","IMG_url","Post_url","Body","ButtonRemove","ContainerCard","ContainerInfo","ContainerProfile","ImgCards","ImgCardsComent","ImgPost","ImgProfile","Loading","ParagrafoText","Gif","darLike","Like","desLike","darDesLike","Comentar","Compatilhar","ToastAnimated","showToast","ViewPost","navigate","infoPost","setInfoPost","info","setInfo","getPosts","get","headers","Authorization","localStorage","getItem","then","res","data","postVoteLike","postVoteDeslike","deletVote","catch","err","console","log","response","getPhotos","hits","idComments","id","setItem","idVote","body","direction","post","type","message","delete","length","map","posts","index","userImageURL","title","username","largeImageURL","voteSum","userVote","commentCount"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { IMG_url, Post_url } from '../../../constants/urls';\nimport {\n\tBody,\n\tButtonRemove,\n\tContainerCard,\n\tContainerInfo,\n\tContainerProfile,\n\tImgCards,\n\tImgCardsComent,\n\tImgPost,\n\tImgProfile,\n\tLoading,\n\tParagrafoText\n} from '../styledPost';\nimport Gif from '../../../constants/imgs/loading.gif';\n\nimport darLike from '../../../constants/imgs/darLike.png';\nimport Like from '../../../constants/imgs/like.png';\n\nimport desLike from '../../../constants/imgs/deslike.png';\nimport darDesLike from '../../../constants/imgs/darDeslike.png';\n\nimport Comentar from '../../../constants/imgs/comentarios.png';\nimport Compatilhar from '../../../constants/imgs/compartilhar.png';\nimport ToastAnimated, { showToast } from '../../ui-lib';\n\nexport default function ViewPost() {\n\tconst navigate = useNavigate();\n\tconst [ infoPost, setInfoPost ] = useState([]);\n\tconst [ info, setInfo ] = useState([]);\n\n\tconst getPosts = () => {\n\t\taxios\n\t\t\t.get(Post_url, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: localStorage.getItem('tokenEddit')\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tsetInfoPost(res.data);\n\t\t\t\tpostVoteLike();\n\t\t\t\tpostVoteDeslike();\n\t\t\t\tdeletVote();\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response);\n\t\t\t});\n\t};\n\n\tconst getPhotos = () => {\n\t\taxios\n\t\t\t.get(IMG_url)\n\t\t\t.then((res) => {\n\t\t\t\tsetInfo(res.data.hits);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response);\n\t\t\t});\n\t};\n\n\tconst idComments = (id) => {\n\t\tlocalStorage.setItem('idComments', id);\n\t\tnavigate('/comments-post');\n\t};\n\n\tconst postVoteLike = (idVote) => {\n\t\tconst body = {\n\t\t\tdirection: 1,\n\t\t}\n\t\taxios.post(`${Post_url}/${idVote}/votes`, body, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem('tokenEddit')\n\t\t\t}\n\t\t})\n\t\t.then((res) => {\n\t\t\tshowToast({ type: \"success\", message: \"Você adicionou + 1 like ao post\" });\n\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err.response)\n\t\t})\n\t};\n\tconst postVoteDeslike = (idVote) => {\n\t\tconst body = {\n\t\t\tdirection: -1,\n\t\t}\n\t\taxios.post(`${Post_url}/${idVote}/votes`, body, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem('tokenEddit')\n\t\t\t}\n\t\t})\n\t\t.then((res) => {\n\t\t\tshowToast({ type: \"success\", message: \"Você deu -1 like ao post\" });\n\t\t})\n\t\t.catch((err) => {\n\t\t})\n\t};\n\n\tconst deletVote = (idVote) => {\n\t\taxios.delete(`${Post_url}/${idVote}/votes`, {\n\t\t\theaders: {\n\t\t\t\tAuthorization: localStorage.getItem('tokenEddit')\n\t\t\t}\n\t\t})\n    .then((res) => {\n\t\t\tshowToast({ type: \"success\", message: \"Você deletou sua interação para adicionar novamente clique duas vezes no like ou deslike\" });\n    })\n    .catch((err) => {\n    })\n  }\n\n\tuseEffect(\n\t\t() => {\n\t\t\tgetPosts();\n\t\t\tgetPhotos();\n\t\t},\n\t\t[ getPosts()]\n\t);\n\n\n\treturn (\n\t\t<div>\n\t\t\t{infoPost && infoPost.length > 0 ? (\n\t\t\t\tinfoPost.map((posts, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ContainerCard key={posts.id}>\n\t\t\t\t\t\t\t<ToastAnimated/>\n\t\t\t\t\t\t\t<ContainerProfile>\n\t\t\t\t\t\t\t\t<ImgProfile src={info[index +1].userImageURL} />\n\t\t\t\t\t\t\t\t<ParagrafoText>{posts.title}</ParagrafoText>\n\t\t\t\t\t\t\t\t<p>@{posts.username}</p>\n\t\t\t\t\t\t\t</ContainerProfile>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ImgPost src={info[index].largeImageURL} />\n\t\t\t\t\t\t\t\t<Body>{posts.body}</Body>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ContainerInfo>\n\t\t\t\t\t\t\t\t<p>{posts.voteSum && posts.voteSum.length >= 1 ? <p>curtidas: {posts.voteSum}</p> : <p>curtidas: 0</p>}</p>\n\t\t\t\t\t\t\t\t<ImgCards onClick={() => postVoteLike(posts.id)} src={posts.userVote === 1 ? Like : darLike} alt=\"dar like\" />\n\t\t\t\t\t\t\t\t<ImgCards onClick={() => postVoteDeslike(posts.id)} src={posts.userVote === -1 ? desLike : darDesLike} alt=\"dar like\" />\n\t\t\t\t\t\t\t\t<ButtonRemove onClick={() => deletVote(posts.id)}>Zerar meu votos</ButtonRemove>\n\t\t\t\t\t\t\t\t<ImgCardsComent src={Compatilhar} alt=\"compartilhar\" />\n\t\t\t\t\t\t\t\t<ImgCardsComent onClick={() => idComments(posts.id)} src={Comentar} alt=\"dar like\" />\n\t\t\t\t\t\t\t\t<p>{posts.commentCount && posts.commentCount.length >= 1 ? (<p>comentários: {posts.commentCount}</p>) : <p>comentário: 0</p> }</p>\n\t\t\t\t\t\t\t</ContainerInfo>\n\t\t\t\t\t\t</ContainerCard>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t) : (\n\t\t\t\t<div>\n\t\t\t\t\t<h1>Aguarde, pois estamos Carregando posts...</h1>\n\t\t\t\t\t<Loading src={Gif} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}