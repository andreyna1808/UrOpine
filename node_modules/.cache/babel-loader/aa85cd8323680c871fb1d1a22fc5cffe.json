{"ast":null,"code":"import _slicedToArray from\"/home/andreyna/moreira-Andreyna-Carvalho/modulo3/lab-eddit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{Auth,IMG_url,Post_url}from'../../../constants/urls';import{Body,ContainerCard,ContainerInfo,ContainerProfile,ImgCards,ImgCardsComent,ImgPost,ImgProfile,Loading,ParagrafoText}from'../styledPost';import Gif from'../../../constants/imgs/loading.gif';import darLike from'../../../constants/imgs/darLike.png';import Like from'../../../constants/imgs/like.png';import desLike from'../../../constants/imgs/deslike.png';import darDesLike from'../../../constants/imgs/darDeslike.png';import Comentar from'../../../constants/imgs/comentarios.png';import Compatilhar from'../../../constants/imgs/compartilhar.png';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ViewPost(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),infoPost=_useState2[0],setInfoPost=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),clickVote=_useState6[0],setClickVote=_useState6[1];var getPosts=function getPosts(){axios.get(Post_url,Auth).then(function(res){setInfoPost(res.data);}).catch(function(err){console.log(err.response);});};var getPhotos=function getPhotos(){axios.get(IMG_url).then(function(res){setInfo(res.data.hits);}).catch(function(err){console.log(err.response);});};useEffect(function(){getPosts();getPhotos();postVote();},[infoPost]);var idComments=function idComments(id){localStorage.setItem('idComments',id);navigate('/comments-post');};var infoVoteLike=function infoVoteLike(infoClick){localStorage.setItem('infoClick',infoClick);setClickVote(1);};var infoVoteDeslike=function infoVoteDeslike(infoClick){localStorage.setItem('infoClick',infoClick);setClickVote(-1);};var postVote=function postVote(){var idVote=localStorage.getItem('infoClick');var body={direction:clickVote};axios.post(\"\".concat(Post_url,\"/\").concat(idVote,\"/votes\"),body,Auth).then(function(res){}).catch(function(err){toast.error('Problema com o like/deslike');});};return/*#__PURE__*/_jsx(\"div\",{children:infoPost&&infoPost.length>0?infoPost.map(function(posts,index){return/*#__PURE__*/_jsxs(ContainerCard,{children:[/*#__PURE__*/_jsxs(ContainerProfile,{children:[/*#__PURE__*/_jsx(ImgProfile,{src:info[index+1].userImageURL}),/*#__PURE__*/_jsx(ParagrafoText,{children:posts.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"@\",posts.username]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ImgPost,{src:info[index].largeImageURL}),/*#__PURE__*/_jsx(Body,{children:posts.body})]}),/*#__PURE__*/_jsxs(ContainerInfo,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"curtidas: \",posts.voteSum]}),/*#__PURE__*/_jsx(ImgCards,{onClick:function onClick(){return infoVoteLike(posts.id);},src:darLike,alt:\"dar like\"}),/*#__PURE__*/_jsx(ImgCards,{onClick:function onClick(){return infoVoteDeslike(posts.id);},src:darDesLike,alt:\"dar deslike\"}),/*#__PURE__*/_jsx(ImgCards,{src:Compatilhar,alt:\"Compartilhar\"}),/*#__PURE__*/_jsx(ImgCardsComent,{onClick:function onClick(){return idComments(posts.id);},src:Comentar,alt:\"dar like\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"coment\\xE1rios: \",posts.commentCount]})]})]},posts.id);}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Aguarde, pois estamos Carregando posts...\"}),/*#__PURE__*/_jsx(Loading,{src:Gif})]})});}","map":{"version":3,"sources":["/home/andreyna/moreira-Andreyna-Carvalho/modulo3/lab-eddit/src/pages/post/viewPosts/viewPost.js"],"names":["React","useEffect","useState","useNavigate","axios","Auth","IMG_url","Post_url","Body","ContainerCard","ContainerInfo","ContainerProfile","ImgCards","ImgCardsComent","ImgPost","ImgProfile","Loading","ParagrafoText","Gif","darLike","Like","desLike","darDesLike","Comentar","Compatilhar","toast","ViewPost","navigate","infoPost","setInfoPost","info","setInfo","clickVote","setClickVote","getPosts","get","then","res","data","catch","err","console","log","response","getPhotos","hits","postVote","idComments","id","localStorage","setItem","infoVoteLike","infoClick","infoVoteDeslike","idVote","getItem","body","direction","post","error","length","map","posts","index","userImageURL","title","username","largeImageURL","voteSum","commentCount"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { Auth, IMG_url, Post_url } from '../../../constants/urls';\nimport {\n\tBody,\n\tContainerCard,\n\tContainerInfo,\n\tContainerProfile,\n\tImgCards,\n\tImgCardsComent,\n\tImgPost,\n\tImgProfile,\n\tLoading,\n\tParagrafoText\n} from '../styledPost';\nimport Gif from '../../../constants/imgs/loading.gif';\n\nimport darLike from '../../../constants/imgs/darLike.png';\nimport Like from '../../../constants/imgs/like.png';\n\nimport desLike from '../../../constants/imgs/deslike.png';\nimport darDesLike from '../../../constants/imgs/darDeslike.png';\n\nimport Comentar from '../../../constants/imgs/comentarios.png';\nimport Compatilhar from '../../../constants/imgs/compartilhar.png';\nimport { toast } from 'react-toastify';\n\nexport default function ViewPost() {\n\tconst navigate = useNavigate();\n\tconst [ infoPost, setInfoPost ] = useState([]);\n\tconst [ info, setInfo ] = useState([]);\n\tconst [ clickVote, setClickVote] = useState(0)\n\n\tconst getPosts = () => {\n\t\taxios\n\t\t\t.get(Post_url, Auth)\n\t\t\t.then((res) => {\n\t\t\t\tsetInfoPost(res.data);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response);\n\t\t\t});\n\t};\n\n\tconst getPhotos = () => {\n\t\taxios\n\t\t\t.get(IMG_url)\n\t\t\t.then((res) => {\n\t\t\t\tsetInfo(res.data.hits);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err.response);\n\t\t\t});\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tgetPosts();\n\t\t\tgetPhotos();\n\t\t\tpostVote();\n\t\t},\n\t\t[ infoPost ]\n\t);\n\n\tconst idComments = (id) => {\n\t\tlocalStorage.setItem('idComments', id);\n\t\tnavigate('/comments-post');\n\t};\n\n\tconst infoVoteLike = (infoClick) => {\n\t\tlocalStorage.setItem('infoClick', infoClick);\n\t\tsetClickVote(1)\n\t}\n\tconst infoVoteDeslike = (infoClick) => {\n\t\tlocalStorage.setItem('infoClick', infoClick);\n\t\tsetClickVote(-1)\n\t}\n\n\tconst postVote = () => {\n\t\tconst idVote = localStorage.getItem('infoClick')\n\t\tconst body = {\n\t\t\tdirection: clickVote,\n\t\t}\n\t\taxios.post(`${Post_url}/${idVote}/votes`, body, Auth)\n\t\t.then((res) => {\n\n\t\t})\n\t\t.catch((err) => {\n\t\t\ttoast.error('Problema com o like/deslike')\n\t\t})\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{infoPost && infoPost.length > 0 ? (\n\t\t\t\tinfoPost.map((posts, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ContainerCard key={posts.id}>\n\t\t\t\t\t\t\t<ContainerProfile>\n\t\t\t\t\t\t\t\t<ImgProfile src={info[index +1].userImageURL} />\n\t\t\t\t\t\t\t\t<ParagrafoText>{posts.title}</ParagrafoText>\n\t\t\t\t\t\t\t\t<p>@{posts.username}</p>\n\t\t\t\t\t\t\t</ContainerProfile>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ImgPost src={info[index].largeImageURL} />\n\t\t\t\t\t\t\t\t<Body>{posts.body}</Body>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ContainerInfo>\n\t\t\t\t\t\t\t\t<p>curtidas: {posts.voteSum}</p>\n\t\t\t\t\t\t\t\t<ImgCards onClick={() => infoVoteLike(posts.id)} src={darLike} alt=\"dar like\" />\n\t\t\t\t\t\t\t\t<ImgCards onClick={() => infoVoteDeslike(posts.id)} src={darDesLike} alt=\"dar deslike\" />\n\t\t\t\t\t\t\t\t<ImgCards src={Compatilhar} alt=\"Compartilhar\" />\n\t\t\t\t\t\t\t\t<ImgCardsComent onClick={() => idComments(posts.id)} src={Comentar} alt=\"dar like\" />\n\t\t\t\t\t\t\t\t<p>comentários: {posts.commentCount}</p>\n\t\t\t\t\t\t\t</ContainerInfo>\n\t\t\t\t\t\t</ContainerCard>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t) : (\n\t\t\t\t<div>\n\t\t\t\t\t<h1>Aguarde, pois estamos Carregando posts...</h1>\n\t\t\t\t\t<Loading src={Gif} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}